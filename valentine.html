<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Be My Valentine üíñ</title>

  <style>
    :root { --pad: 14px; }

    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background: #ffe6f2;
      margin: 0;
      min-height: 100vh;
      display: grid;
      place-items: center;
      overflow: hidden;
      -webkit-tap-highlight-color: transparent;
    }

    .container {
      background: #fff;
      padding: 26px 18px;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.12);
      width: min(560px, 92vw);
      margin: 16px;
    }

    h2 {
      margin: 0 0 10px;
      font-size: clamp(20px, 4.5vw, 28px);
      line-height: 1.2;
    }

    #subtext {
      margin: 0 0 10px;
      color: #444;
      font-size: clamp(14px, 3.5vw, 16px);
    }

    #score {
      margin: 0 0 18px;
      color: #777;
      font-size: 13px;
    }

    .buttons {
      display: flex;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    button {
      padding: 12px 18px;
      font-size: 18px;
      cursor: pointer;
      border-radius: 12px;
      border: none;
      transition: transform 0.12s ease, font-size 0.12s ease;
      user-select: none;
      touch-action: manipulation; /* mobile-friendly taps */
      min-width: 120px;
    }

    /* Make buttons easier to tap on small screens */
    @media (max-width: 420px) {
      button { min-width: 44vw; font-size: 17px; padding: 12px 14px; }
      .buttons { gap: 10px; }
    }

    .yes-button {
      background: #35b26f;
      color: #fff;
      box-shadow: 0 8px 18px rgba(53,178,111,0.25);
      position: relative;
      z-index: 2;
    }

    .no-button {
      background: #ff4d4d;
      color: #fff;
      box-shadow: 0 8px 18px rgba(255,77,77,0.22);
      position: relative;
      z-index: 2;
    }

    .hint {
      margin-top: 16px;
      font-size: 12px;
      color: #666;
    }

    /* Screen shake */
    .shake { animation: shake 0.25s linear 1; }
    @keyframes shake {
      0% { transform: translate(0, 0); }
      25% { transform: translate(6px, 0); }
      50% { transform: translate(-6px, 0); }
      75% { transform: translate(6px, 0); }
      100% { transform: translate(0, 0); }
    }

    /* Confetti */
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      top: -12px;
      left: 50%;
      opacity: 0.95;
      transform: translateX(-50%);
      animation: fall 1.2s linear forwards;
      border-radius: 2px;
      pointer-events: none;
      z-index: 9999;
    }
    @keyframes fall {
      to { transform: translate(-50%, 110vh) rotate(720deg); }
    }

    /* Small helper for mobile tooltip */
    .toast {
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      background: rgba(0,0,0,0.78);
      color: #fff;
      padding: 10px 12px;
      border-radius: 12px;
      font-size: 13px;
      max-width: 92vw;
      opacity: 0;
      transition: opacity 0.2s ease;
      z-index: 99999;
      pointer-events: none;
    }
    .toast.show { opacity: 1; }
  </style>
</head>

<body>
  <div class="container">
    <h2 id="title">Will you be my Valentine? üíñ</h2>
    <p id="subtext">Be honest‚Ä¶ your heart already knows the answer üòå</p>
    <p id="score">Lies detected: 0</p>

    <div class="buttons">
      <button id="yesBtn" class="yes-button">Yes</button>
      <button id="noBtn" class="no-button">No</button>
    </div>

    <div class="hint">Tip: click ‚ÄúNo‚Äù a few times‚Ä¶ if you can üòà</div>
  </div>

  <div id="toast" class="toast"></div>

  <script>
    // -----------------------------
    // Funny + Mobile-friendly version
    // - Desktop: "No" escapes on hover sometimes (but still clickable).
    // - Mobile: no hover; "No" escapes on tap sometimes (but still clickable).
    // - Yes grows, shake, confetti, and a couple of funny milestones.
    // -----------------------------

    let messageIndex = 0;
    let noClicks = 0;

    // Hover/tap escape fairness controls
    let hoverCooldownUntil = 0;
    let mercyUntil = 0;

    const messages = [
      "No",
      "Nah",
      "Still no",
      "Are you sure?? üò≥",
      "Bro‚Ä¶",
      "This is emotional damage üíî",
      "I‚Äôm calling Cupid üèπ",
      "Skill issue üòå",
      "Your device is infected with LOVE üòà",
      "System override initiated ‚úÖ",
      "Ok you lost privileges üòÇ",
      "Last chance!!! üò≠"
    ];

    const subtexts = [
      "Be honest‚Ä¶ your heart already knows the answer üòå",
      "My lawyer says you can‚Äôt do that üò§",
      "This button is getting suspicious‚Ä¶",
      "Ok now you‚Äôre just being dramatic üò≠",
      "If you click No again I will teleport.",
      "I‚Äôm not saying I‚Äôm crying‚Ä¶ but I‚Äôm crying üíî",
      "We both know where this is going üòè"
    ];

    const noBtn = document.getElementById("noBtn");
    const yesBtn = document.getElementById("yesBtn");
    const subtext = document.getElementById("subtext");
    const score = document.getElementById("score");
    const toast = document.getElementById("toast");

    const isTouch = window.matchMedia && window.matchMedia("(pointer: coarse)").matches;

    function showToast(msg, ms = 1100) {
      toast.textContent = msg;
      toast.classList.add("show");
      clearTimeout(showToast._t);
      showToast._t = setTimeout(() => toast.classList.remove("show"), ms);
    }

    function setMercyWindow(ms) {
      mercyUntil = Date.now() + ms;
    }

    function shakeScreen() {
      document.body.classList.add("shake");
      setTimeout(() => document.body.classList.remove("shake"), 250);
    }

    function growYesButton() {
      const currentSize = parseFloat(window.getComputedStyle(yesBtn).fontSize);
      yesBtn.style.fontSize = `${currentSize * 1.18}px`;
      yesBtn.style.transform = "scale(1.02)";
      setTimeout(() => (yesBtn.style.transform = "scale(1)"), 120);
    }

    function moveNoButtonRandom() {
      const padding = 12;
      const btnW = noBtn.offsetWidth;
      const btnH = noBtn.offsetHeight;

      const maxX = window.innerWidth - btnW - padding;
      const maxY = window.innerHeight - btnH - padding;

      const x = Math.max(padding, Math.floor(Math.random() * Math.max(maxX, padding)));
      const y = Math.max(padding, Math.floor(Math.random() * Math.max(maxY, padding)));

      noBtn.style.position = "fixed";
      noBtn.style.left = x + "px";
      noBtn.style.top = y + "px";

      const rot = Math.floor(Math.random() * 50) - 25;
      const sc = 0.95 + Math.random() * 0.25;
      noBtn.style.transform = `rotate(${rot}deg) scale(${sc})`;
    }

    function popConfetti(count = 90) {
      for (let i = 0; i < count; i++) {
        const c = document.createElement("div");
        c.className = "confetti";
        c.style.left = Math.random() * 100 + "vw";
        c.style.background = `hsl(${Math.random() * 360}, 90%, 60%)`;
        c.style.animationDuration = (0.8 + Math.random() * 0.9) + "s";
        c.style.width = (6 + Math.random() * 8) + "px";
        c.style.height = (6 + Math.random() * 8) + "px";
        document.body.appendChild(c);
        setTimeout(() => c.remove(), 2000);
      }
    }

    function escapeChance() {
      // Early: easy to click; later: harder.
      if (noClicks < 2) return 0.20;
      if (noClicks < 5) return 0.40;
      if (noClicks < 9) return 0.60;
      return 0.75;
    }

    function attemptEscape(triggerLabel) {
      const now = Date.now();

      // fairness: don't escape during mercy window or too frequently
      if (now < mercyUntil) return false;
      if (now < hoverCooldownUntil) return false;

      if (Math.random() < escapeChance()) {
        moveNoButtonRandom();

        // cooldown + short mercy so it's clickable after it moves
        hoverCooldownUntil = now + 450;
        setMercyWindow(650);

        if (isTouch && triggerLabel) showToast(triggerLabel, 900);
        return true;
      }
      return false;
    }

    function handleYesClick() {
      popConfetti(120);
      subtext.textContent = "Correct choice. Extremely wise. ‚úÖüòå";
      setTimeout(() => {
        // Replace this with your own success page if you want
        window.location.href = "yes_page.html";
      }, 900);
    }

    function handleNoClick() {
      noClicks++;
      score.textContent = `Lies detected: ${noClicks}`;

      noBtn.textContent = messages[messageIndex];
      messageIndex = (messageIndex + 1) % messages.length;

      subtext.textContent = subtexts[noClicks % subtexts.length];

      shakeScreen();
      growYesButton();

      // After a successful click, give a mercy window so next click is possible
      setMercyWindow(900);

      // Funny milestones
      if (noClicks === 4) showToast("Ok ok‚Ä¶ you‚Äôre persistent üòÇ");
      if (noClicks === 7) showToast("This is now a boss fight üòà");

      // CAPTCHA boss fight at click #5 (works on mobile too)
      if (noClicks === 5) {
        const answer = prompt("Security check üòà Type YES to prove you‚Äôre not lying:");
        if (!answer || answer.trim().toUpperCase() !== "YES") {
          alert("Access denied. Try again üòå");
        } else {
          alert("Verified ‚úÖ (still suspicious though)");
        }
      }

      // Plot twist: after 12 clicks, No forces Yes
      if (noClicks >= 12) {
        subtext.textContent = "Ok‚Ä¶ decision has been made for you üòå‚úÖ";
        setTimeout(handleYesClick, 700);
      }
    }

    // Click handlers
    yesBtn.addEventListener("click", handleYesClick);

    // Desktop (hover): escape sometimes on hover BUT still clickable
    if (!isTouch) {
      noBtn.addEventListener("mouseenter", () => attemptEscape());
    }

    // Mobile (no hover): escape sometimes on touchstart, but allow click sometimes
    // IMPORTANT: we do NOT preventDefault; clicks still register normally.
    noBtn.addEventListener("touchstart", () => {
      attemptEscape("Nope üèÉüí®");
    }, { passive: true });

    // Click: always advances steps (even if it escaped earlier)
    noBtn.addEventListener("click", handleNoClick);

    // Optional extra chaos: after 6 No clicks, "Yes" gently follows cursor (desktop only)
    document.addEventListener("mousemove", (e) => {
      if (noClicks >= 6 && !isTouch) {
        yesBtn.style.position = "fixed";
        yesBtn.style.left = (e.clientX - yesBtn.offsetWidth / 2) + "px";
        yesBtn.style.top  = (e.clientY - yesBtn.offsetHeight / 2) + "px";
      }
    });

    // Prevent off-screen on resize
    window.addEventListener("resize", () => {
      // If No button is fixed, keep it within bounds by re-rolling once
      if (getComputedStyle(noBtn).position === "fixed") moveNoButtonRandom();
      if (getComputedStyle(yesBtn).position === "fixed" && !isTouch) {
        // leave yes as-is; user is moving cursor anyway
      }
    });
  </script>
</body>
</html>

